<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic Tutorial • brapi</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Basic Tutorial">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brapi</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.9.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tutorial.html">Basic Tutorial</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Basic Tutorial</h1>
                        <h4 class="author">Reinhard Simon</h4>
            
            <h4 class="date">2018-06-21</h4>
      
      
      <div class="hidden name"><code>tutorial.Rmd</code></div>

    </div>

    
    
<table class="table"><tbody><tr class="odd">
<td>This package is under development. It has not yet been exhaustively tested for all calls neither. Usage may also still change. If you have suggestions please use the issue tracker.</td>
</tr></tbody></table>
<div id="get-started-with-real-data" class="section level1">
<h1 class="hasAnchor">
<a href="#get-started-with-real-data" class="anchor"></a>Get started with real data</h1>
<p>Here we use as an example the sweetpotatobase.org database since it has currently one of the most complete implementations. Also, data are public and no login credentials are needed. It is part of the white list of the internal databases, too. So no further knowledge of configuration details are needed.</p>
<div id="get-the-database-handle" class="section level2">
<h2 class="hasAnchor">
<a href="#get-the-database-handle" class="anchor"></a>Get the database handle</h2>
<p>The package comes with a list of known databases (white list). Both the white list and the handle can be printed in summary form to the console. The $ sign can be used to access individual slots and overwrite values. This can also be used as a template to configure a handle to another brapi compliant database.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(brapi)</a></code></pre></div>
<pre><code>## Please note that current supports 44/44 BrAPI calls of version 1.1.
## 
##      Please note that current support is partially complete for BrAPI version 1.2
##       - the additional calls in version 1.2 are not yet supported.
## 
##      Also, checks on response objects and fields are only loosely implemented to accomodate differences
##       between BrAPI versions.
##     If you find issues please 
## 
##     - turn on comments with ba_show_info()
## .
##     - You can double check against the database by copy/paste of the reported BrAPI URL
## 
##       at: http://webapps.ipk-gatersleben.de/brapivalidator!
## 
##  0.9.4 
## 
##  Please register any further issues at:
##         https://github.com/CIP-RIU/brapi/issues</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">library</span>(magrittr)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">white_list &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ba_db.html">ba_db</a></span>()</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co"># print names of databases from whitelist</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">white_list</a></code></pre></div>
<pre><code>## apiary
## bms_test
## cassavabase
## cropontology
## eu_sol
## germinate_test
## icrisat_prod
## mgis
## musabase
## ricebase
## snpseek
## sweetpotatobase
## t3s
## testserver
## tto
## ttw
## yambase</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">sp_base &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ba_db.html">ba_db</a></span>()<span class="op">$</span>sweetpotatobase</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co"># print summary of sp_base object</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">sp_base</a></code></pre></div>
<pre><code>## Crop = sweetpotato
## 
## Addres:Port = sweetpotatobase.org:80
## User =</code></pre>
</div>
<div id="listing-available-crops" class="section level2">
<h2 class="hasAnchor">
<a href="#listing-available-crops" class="anchor"></a>Listing available crops</h2>
<p>This is interesting if you have multicrop databases. In the case of sweetpotatobase there is only one crop on that server.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">crops &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ba_crops.html">ba_crops</a></span>(sp_base)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co"># We only expect one crop here: sweetpotato</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"></a>
<a class="sourceLine" id="cb7-5" data-line-number="5">crops</a></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   crops      
##   &lt;chr&gt;      
## 1 sweetpotato</code></pre>
</div>
<div id="switching-on-information-on-server-connectiviy" class="section level2">
<h2 class="hasAnchor">
<a href="#switching-on-information-on-server-connectiviy" class="anchor"></a>Switching on information on server connectiviy</h2>
<p>In many cases when exploring a new database it will be useful to get any feedback from the server. The package provides a switch that allows to turn on or off such log information.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/ba_show_info.html">ba_show_info</a></span>(<span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="listing-available-calls" class="section level2">
<h2 class="hasAnchor">
<a href="#listing-available-calls" class="anchor"></a>Listing available calls</h2>
<p>The brapi community and standard allows currently a large degree of freedom on implementation of individual parts of the standard (or calls). One call lists the functionality supported by the server.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="../reference/ba_calls.html">ba_calls</a></span>(sp_base)</a></code></pre></div>
<pre><code>## URL call was: https://sweetpotatobase.org/brapi/v1/calls/?</code></pre>
<pre><code>## Waiting for response from server: ...</code></pre>
<pre><code>## Server status:  ok!</code></pre>
<pre><code>## Status details from Server:</code></pre>
<pre><code>## 
## Infos:</code></pre>
<pre><code>## BrAPI base call found with page=0, pageSize=10
## Loading CXGN::BrAPI::v1::Calls</code></pre>
<pre><code>## 
## Successes:</code></pre>
<pre><code>## Calls result constructed</code></pre>
<pre><code>## 
## Errors:</code></pre>
<pre><code>## </code></pre>
<pre><code>## No encoding supplied: defaulting to UTF-8.</code></pre>
<pre><code>## Returning page 0 (max. 0) with max. 1000 items (out of a total of 48).</code></pre>
<pre><code>## # A tibble: 48 x 4
##    versions  methods      datatypes call                                  
##  * &lt;list&gt;    &lt;chr&gt;        &lt;chr&gt;     &lt;chr&gt;                                 
##  1 &lt;chr [1]&gt; POST; DELETE json      token                                 
##  2 &lt;chr [1]&gt; GET          json      calls                                 
##  3 &lt;chr [1]&gt; GET          json      observationlevels                     
##  4 &lt;chr [1]&gt; GET; POST    json      germplasm-search                      
##  5 &lt;chr [1]&gt; GET          json      germplasm/{germplasmDbId}             
##  6 &lt;chr [2]&gt; GET          json      germplasm/{germplasmDbId}/pedigree    
##  7 &lt;chr [2]&gt; GET          json      germplasm/{germplasmDbId}/progeny     
##  8 &lt;chr [1]&gt; GET          json      germplasm/{germplasmDbId}/markerprofi~
##  9 &lt;chr [1]&gt; GET          json      germplasm/{germplasmDbId}/attributes  
## 10 &lt;chr [1]&gt; GET          json      attributes                            
## # ... with 38 more rows</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw"><a href="../reference/ba_show_info.html">ba_show_info</a></span>(<span class="ot">FALSE</span>)</a></code></pre></div>
<p>As you notice, the table is presented as a tibble. This has the advantage that it fits on the screen always even though there are big tables. But sometimes it may be useful to just print out the whole table. How to do that is the topic of the next section.</p>
</div>
<div id="function-design" class="section level2">
<h2 class="hasAnchor">
<a href="#function-design" class="anchor"></a>Function design</h2>
<p>All functions always have two parameters: the first is always the database handle or connection details (‘con’), the last is always the R class of the returned object. Most parameters should be of class ‘character’. Exceptions are: the con parameter is always a list; the parameters ‘page’ and ‘pageSize’ if applicable are integers. For details see individual functions.</p>
</div>
<div id="output-formats" class="section level2">
<h2 class="hasAnchor">
<a href="#output-formats" class="anchor"></a>Output formats</h2>
<p>This is by default a tibble. However, there are several others supported. An alternative is the ‘data.frame’. In addition and mainly for debugging purposes you can set the value to ‘json’ which will return the full response json object; or you can set it to ‘list’ which will return a list equivalent.</p>
<p>So, let’s just print out the whole data.frame.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw"><a href="../reference/ba_calls.html">ba_calls</a></span>(<span class="dt">con =</span> sp_base, <span class="dt">rclass =</span> <span class="st">"data.frame"</span>)</a></code></pre></div>
<pre><code>## No encoding supplied: defaulting to UTF-8.</code></pre>
<pre><code>##    versions      methods           datatypes
## 1       1.0 POST; DELETE                json
## 2       1.0          GET                json
## 3       1.0          GET                json
## 4       1.0    GET; POST                json
## 5       1.0          GET                json
## 6  1.0, 1.2          GET                json
## 7  1.0, 1.2          GET                json
## 8       1.0          GET                json
## 9       1.0          GET                json
## 10      1.0          GET                json
## 11      1.0          GET                json
## 12      1.0          GET                json
## 13      1.0          GET                json
## 14      1.0          GET                json
## 15      1.0    GET; POST json; tsv; csv; xls
## 16      1.0    GET; POST json; tsv; csv; xls
## 17      1.0    GET; POST                json
## 18      1.0          GET                json
## 19      1.0    GET; POST                json
## 20      1.0    GET; POST                json
## 21      1.0    GET; POST                json
## 22      1.0          GET                json
## 23      1.0    GET; POST                json
## 24      1.0          GET                json
## 25      1.0          GET                json
## 26      1.0          GET                json
## 27      1.0          GET                json
## 28      1.0          GET json; csv; xls; tsv
## 29      1.0          GET                json
## 30      1.0          GET                json
## 31      1.0    GET; POST                json
## 32      1.0    GET; POST                json
## 33      1.0    GET; POST                json
## 34      1.0    GET; POST                json
## 35      1.0          GET                json
## 36      1.0          GET                json
## 37      1.0          GET                json
## 38      1.0          GET                json
## 39      1.0          GET                json
## 40      1.0          GET                json
## 41      1.0          GET                json
## 42      1.0          GET                json
## 43      1.0          GET                json
## 44      1.0          GET                json
## 45      1.0          GET                json
## 46      1.0    GET; POST                json
## 47      1.0    GET; POST                json
## 48      1.0          GET                json
##                                        call
## 1                                     token
## 2                                     calls
## 3                         observationlevels
## 4                          germplasm-search
## 5                 germplasm/{germplasmDbId}
## 6        germplasm/{germplasmDbId}/pedigree
## 7         germplasm/{germplasmDbId}/progeny
## 8  germplasm/{germplasmDbId}/markerprofiles
## 9      germplasm/{germplasmDbId}/attributes
## 10                               attributes
## 11                    attributes/categories
## 12                           markerprofiles
## 13       markerprofiles/{markerprofileDbId}
## 14                   markerprofiles/methods
## 15                      allelematrix-search
## 16                    allelematrices-search
## 17                                 programs
## 18                                    crops
## 19                                  seasons
## 20                               studytypes
## 21                                   trials
## 22                       trials/{trialDbId}
## 23                           studies-search
## 24                      studies/{studyDbId}
## 25            studies/{studyDbId}/germplasm
## 26 studies/{studyDbId}/observationvariables
## 27     studies/{studyDbId}/observationunits
## 28                studies/{studyDbId}/table
## 29               studies/{studyDbId}/layout
## 30         studies/{studyDbId}/observations
## 31                        phenotypes-search
## 32                  phenotypes-search/table
## 33                    phenotypes-search/tsv
## 34                    phenotypes-search/csv
## 35                                   traits
## 36                       traits/{traitDbId}
## 37                                     maps
## 38                           maps/{mapDbId}
## 39                 maps/{mapDbId}/positions
## 40              maps/{mapDbId}/positions/id
## 41                                locations
## 42                      variables/datatypes
## 43                               ontologies
## 44                                variables
## 45      variables/{observationVariableDbId}
## 46                         variables-search
## 47                           samples-search
## 48                     samples/{sampleDbId}</code></pre>
</div>
<div id="getting-phenotypic-data" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-phenotypic-data" class="anchor"></a>Getting phenotypic data</h2>
<p>The brapi models trial data in a three layer hierarchy: a) breeding program which has b) trials that c) may consist of one or more studies at one or more locations. A study at one location is also often referred to as a fieldbook.</p>
<div id="which-breeding-programs-are-there" class="section level3">
<h3 class="hasAnchor">
<a href="#which-breeding-programs-are-there" class="anchor"></a>Which breeding programs are there?</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw"><a href="../reference/ba_programs.html">ba_programs</a></span>(sp_base, <span class="dt">rclass =</span> <span class="st">"data.frame"</span>)</a></code></pre></div>
<pre><code>## No encoding supplied: defaulting to UTF-8.</code></pre>
<pre><code>##    commonCropName leadPerson       name programDbId abbreviation
## 1     SweetPotato            Mozambique         135             
## 2     SweetPotato                Uganda         137             
## 3     SweetPotato                 Ghana         140             
## 4     SweetPotato                  NCSU         132             
## 5     SweetPotato                  Lima         167             
## 6     SweetPotato             GT4SP-CIP         293             
## 7     SweetPotato                 Kenya        1264             
## 8     SweetPotato                   RAB        1282             
## 9     SweetPotato                 INERA        1286             
## 10    SweetPotato                  AARC        1288             
##                            objective
## 1                         Mozambique
## 2                             Uganda
## 3                              Ghana
## 4  NCSU Sweetpotato Breeding Program
## 5   Sweetpotato Breeding program CIP
## 6     Genomics Tools for Sweetpotato
## 7              Demo Breeding Program
## 8                             Rubona
## 9                        Ouagadougou
## 10                           Hawassa</code></pre>
</div>
<div id="which-studies-are-there" class="section level3">
<h3 class="hasAnchor">
<a href="#which-studies-are-there" class="anchor"></a>Which studies are there?</h3>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw"><a href="../reference/ba_studies_search.html">ba_studies_search</a></span>(sp_base, <span class="dt">programDbId =</span> <span class="st">"140"</span>)</a></code></pre></div>
<pre><code>## Using GET</code></pre>
<pre><code>## No encoding supplied: defaulting to UTF-8.</code></pre>
<pre><code>## # A tibble: 210 x 15
##    seasons active programName name         locationDbId trialDbId endDate 
##  * &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;     &lt;chr&gt;   
##  1 2015    ""     Ghana       15FOD07Tono  18           230       2015-Ju~
##  2 2015    ""     Ghana       15FOD07Wa    26           230       2015-Ju~
##  3 2015    ""     Ghana       15HST03Ny    28           230       2015-Ju~
##  4 2015    ""     Ghana       15HST04Wa    26           230       &lt;NA&gt;    
##  5 2015    ""     Ghana       15ayt7SP_Im~ 16           230       &lt;NA&gt;    
##  6 2016    ""     Ghana       16CIP-Ghana~ 16           232       2016-Au~
##  7 2016    ""     Ghana       16CIP-Ghana~ 22           232       2016-Ma~
##  8 2010    ""     Ghana       2010ASPGH_A~ 38           284       2010-Ma~
##  9 2010    ""     Ghana       2010ASPGH_A~ 16           284       2010-Ap~
## 10 2010    ""     Ghana       2010ASPGH_A~ 39           284       2010-Ju~
## # ... with 200 more rows, and 8 more variables: trialName &lt;chr&gt;,
## #   locationName &lt;chr&gt;, programDbId &lt;chr&gt;, startDate &lt;chr&gt;,
## #   studyDbId &lt;chr&gt;, studyType &lt;chr&gt;, additionalInfo.design &lt;chr&gt;,
## #   additionalInfo.description &lt;chr&gt;</code></pre>
</div>
<div id="get-a-study-or-fieldbook" class="section level3">
<h3 class="hasAnchor">
<a href="#get-a-study-or-fieldbook" class="anchor"></a>Get a study (or fieldbook)</h3>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="co"># Currently not working!!!</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="co">#dt = ba_studies_table(sp_base, </span></a>
<a class="sourceLine" id="cb35-3" data-line-number="3"><span class="co">#                      studyDbId = "151")</span></a></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#get-started-with-real-data">Get started with real data</a><ul class="nav nav-pills nav-stacked">
<li><a href="#get-the-database-handle">Get the database handle</a></li>
      <li><a href="#listing-available-crops">Listing available crops</a></li>
      <li><a href="#switching-on-information-on-server-connectiviy">Switching on information on server connectiviy</a></li>
      <li><a href="#listing-available-calls">Listing available calls</a></li>
      <li><a href="#function-design">Function design</a></li>
      <li><a href="#output-formats">Output formats</a></li>
      <li><a href="#getting-phenotypic-data">Getting phenotypic data</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Reinhard Simon, Maikel Verouden.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
